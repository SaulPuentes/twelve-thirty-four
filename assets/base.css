/**
 * Base CSS
 * Essential styles for twelve-thirty-four theme components
 */

* {
  box-sizing: border-box;
}

body {
  color: var(--color-foreground);
  background: var(--color-background);
  display: flex;
  flex-direction: column;
  margin: 0;
  min-height: 100svh;
}

/* Utility classes */
.hidden {
  display: none !important;
}

.visually-hidden:not(:focus, :active) {
  position: absolute !important;
  overflow: hidden;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  border: 0;
  clip: rect(0 0 0 0);
  word-wrap: normal !important;
}

@media screen and (max-width: 749px) {
  .mobile\:hidden {
    display: none !important;
  }
}

@media screen and (min-width: 750px) {
  .desktop\:hidden {
    display: none !important;
  }
}

/* Dialog styles */
dialog {
  --backdrop-color-rgb: var(--color-shadow-rgb, 0 0 0);
  background-color: var(--color-background);
  color: var(--color-foreground);
}

.dialog-modal {
  border: none;
  box-shadow: var(--shadow-popover);
}

@media screen and (min-width: 750px) {
  .dialog-modal {
    border-radius: var(--style-border-radius-popover);
    max-width: var(--normal-content-width, 42rem);
  }
}

@media screen and (max-width: 749px) {
  .dialog-modal {
    max-width: 100%;
    max-height: 100%;
    height: 100dvh;
    width: 100dvw;
    padding: var(--padding-md);
  }
}

.dialog-modal::backdrop {
  transition: backdrop-filter var(--animation-speed) var(--animation-easing);
  backdrop-filter: brightness(1);
  background: rgb(var(--backdrop-color-rgb) / var(--backdrop-opacity, 0.15));
}

.dialog-modal[open] {
  animation: elementSlideInTop var(--animation-speed) var(--animation-easing) forwards;
}

.dialog-modal[open]::backdrop {
  animation: backdropFilter var(--animation-speed) var(--animation-easing) forwards;
  transition: opacity var(--animation-speed) var(--animation-easing);
}

.dialog-modal.dialog-closing {
  animation: elementSlideOutTop var(--animation-speed) var(--animation-easing) forwards;
}

.dialog-modal.dialog-closing::backdrop {
  opacity: 0;
}

/* Dialog drawer styles */
.dialog-drawer {
  --dialog-drawer-opening-animation: move-and-fade;
  --dialog-drawer-closing-animation: move-and-fade;
}

.dialog-drawer[open] {
  --start-x: var(--custom-transform-from, 100%);
  --end-x: var(--custom-transform-to, 0px);
  --start-opacity: 1;
  animation: var(--dialog-drawer-opening-animation) var(--animation-speed) var(--animation-easing) forwards;
}

.dialog-drawer[open].dialog-closing {
  --start-x: 0px;
  --end-x: 100%;
  --start-opacity: 1;
  --end-opacity: 1;
  animation: var(--dialog-drawer-closing-animation) var(--animation-speed) var(--animation-easing);
}

/* SVG wrapper */
.svg-wrapper {
  color: currentcolor;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: var(--icon-size-sm);
  height: var(--icon-size-sm);
  pointer-events: none;
}

.svg-wrapper > svg {
  width: var(--icon-size-sm);
  height: var(--icon-size-sm);
}

/* Button styles */
.button,
.button-secondary {
  display: grid;
  align-content: center;
  text-decoration: none;
  text-align: center;
  color: var(--button-color, var(--color-primary-button-text));
  appearance: none;
  background-color: var(--button-background-color, var(--color-primary-button-background));
  border: none;
  font-family: var(--font-body-family);
  margin-block: 0;
  transition: color var(--animation-speed) var(--animation-easing),
    box-shadow var(--animation-speed) var(--animation-easing),
    background-color var(--animation-speed) var(--animation-easing);
  cursor: pointer;
  width: fit-content;
  box-shadow: inset 0 0 0 var(--button-border-width, 0) var(--button-border-color, transparent);
  padding-block: var(--button-padding-block);
  padding-inline: var(--button-padding-inline);
  border-radius: var(--style-border-radius-buttons-primary);
}

.button:hover {
  --button-color: var(--color-primary-button-hover-text);
  --button-background-color: var(--color-primary-button-hover-background);
  --button-border-color: var(--color-primary-button-hover-border);
}

.button-unstyled {
  display: block;
  padding: 0;
  background-color: inherit;
  color: inherit;
  border: 0;
  border-radius: 0;
  overflow: hidden;
  box-shadow: none;
  font-family: var(--font-body-family);
}

.button-unstyled:hover {
  background-color: inherit;
}

/* Close button */
.close-button {
  position: fixed;
  top: var(--margin-lg);
  right: var(--margin-lg);
  width: var(--minimum-touch-target);
  height: var(--minimum-touch-target);
  z-index: var(--layer-flat);
  background-color: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.close-button:hover {
  background-color: transparent;
  opacity: 0.8;
}

.close-button svg {
  width: var(--icon-size-xs);
  height: var(--icon-size-xs);
}

/* Cart bubble */
.cart-bubble {
  --cart-padding: 0.2em;
  position: relative;
  width: 20px;
  aspect-ratio: 1;
  border-radius: 50%;
  border-width: 0;
  display: flex;
  line-height: normal;
  align-items: center;
  justify-content: center;
  color: var(--color-primary-button-text);
  padding-inline: var(--cart-padding);
}

.cart-bubble__background {
  position: absolute;
  inset: 0;
  background-color: var(--color-primary-button-background);
  border-radius: var(--style-border-radius-lg);
}

.cart-bubble__text {
  font-size: var(--font-size--3xs);
  z-index: var(--layer-flat);
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Animations */
@keyframes grow {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes move-and-fade {
  from {
    transform: translate(var(--start-x, 0), var(--start-y, 0));
    opacity: var(--start-opacity, 0);
  }
  to {
    transform: translate(var(--end-x, 0), var(--end-y, 0));
    opacity: var(--end-opacity, 1);
  }
}

@keyframes elementSlideInTop {
  from {
    margin-top: var(--padding-sm);
    opacity: 0;
  }
  to {
    margin-top: 0;
    opacity: 1;
  }
}

@keyframes elementSlideOutTop {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(var(--padding-sm));
    opacity: 0;
  }
}

@keyframes backdropFilter {
  from {
    backdrop-filter: brightness(1);
  }
  to {
    backdrop-filter: brightness(0.75);
  }
}

/* Focus styles */
*:focus-visible {
  outline: var(--focus-outline-width, 2px) solid currentcolor;
  outline-offset: var(--focus-outline-offset, 0.2em);
}

/* Images */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}

img {
  width: 100%;
  height: auto;
}

/* Scroll lock */
html[scroll-lock] {
  overflow: hidden;
}

body.overflow-hidden {
  overflow: hidden;
}

/* H4 styling for cart drawer */
.h4 {
  font-family: var(--font-heading-family);
  font-size: var(--font-size-h4, 1.25rem);
  font-weight: var(--font-heading-weight);
  margin: 0;
}

/* Skip to content */
.skip-to-content-link {
  position: absolute;
  overflow: hidden;
  height: 1px;
  left: -99999px;
  word-wrap: normal !important;
}

.skip-to-content-link:focus {
  z-index: var(--layer-temporary);
  overflow: auto;
  width: auto;
  height: auto;
  padding: var(--padding-lg) var(--padding-4xl);
  left: var(--margin-lg);
  top: var(--margin-lg);
  background-color: var(--color-background);
  box-shadow: 0 0 0 var(--focus-outline-offset, 0.2em) var(--color-background);
}

/* Fly to cart animation */
fly-to-cart {
  --offset-y: 10px;

  position: fixed;
  width: var(--width, 40px);
  height: var(--height, 40px);
  left: 0;
  top: 0;
  z-index: 9999;
  pointer-events: none;
  border-radius: var(--style-border-radius-buttons-primary, 0);
  overflow: hidden;
  object-fit: cover;
  background-size: cover;
  background-position: center;
  opacity: 0;
  background-color: var(--color-foreground);
  translate: var(--start-x, 0) var(--start-y, 0);
  transform: translate(-50%, -50%);
  animation-name: travel-x, travel-y, travel-scale;
  animation-timing-function: var(--x-timing), var(--y-timing), var(--scale-timing);
  animation-duration: 0.6s;
  animation-composition: accumulate;
  animation-fill-mode: both;
}

fly-to-cart.fly-to-cart--main {
  --x-timing: cubic-bezier(0.7, -5, 0.98, 0.5);
  --y-timing: cubic-bezier(0.15, 0.57, 0.9, 1.05);
  --scale-timing: cubic-bezier(0.85, 0.05, 0.96, 1);
}

fly-to-cart.fly-to-cart--quick {
  --x-timing: cubic-bezier(0, -0.1, 1, 0.32);
  --y-timing: cubic-bezier(0, 0.92, 0.92, 1.04);
  --scale-timing: cubic-bezier(0.86, 0.08, 0.98, 0.98);

  animation-duration: 0.6s;
}

fly-to-cart.fly-to-cart--sticky {
  --x-timing: cubic-bezier(0.98, -0.8, 0.92, 0.5);
  --y-timing: cubic-bezier(0.14, 0.56, 0.92, 1.04);
  --scale-timing: cubic-bezier(0.86, 0.08, 0.98, 0.98);
  --radius: var(--style-border-radius-buttons-primary);

  animation-duration: 0.8s;
}

@media (max-width: 749px) {
  fly-to-cart.fly-to-cart--sticky {
    --x-timing: cubic-bezier(0.98, -0.1, 0.92, 0.5);
  }
}

@keyframes travel-scale {
  0% {
    opacity: var(--start-opacity, 1);
  }

  5% {
    opacity: 1;
  }

  100% {
    border-radius: 50%;
    opacity: 1;
    transform: translate(-50%, calc(-50% + var(--offset-y))) scale(0.25);
  }
}

@keyframes travel-x {
  to {
    translate: var(--travel-x, 0) 0;
  }
}

@keyframes travel-y {
  to {
    translate: 0 var(--travel-y, 0);
  }
}

/* Quantity Selector Styles */

.quantity-selector__input {
  text-align: center;
}

.quantity-selector__input,
.quantity-selector__button {
  border: none;
  background-color: transparent;
}

/* ============================================
   Quick Add & Product Card Styles
   ============================================ */

/* CSS Variables for quick-add */
:root {
  --button-size-md: 40px;
  --padding-sm: 0.75rem;
  --padding-md: 1rem;
  --layer-raised: 2;
  --ease-out-cubic: cubic-bezier(0.33, 1, 0.68, 1);
  --ease-out-quad: cubic-bezier(0.5, 1, 0.89, 1);
  --animation-speed-slow: 0.4s;
  --style-border-radius-card: 0;
}

/* Add to cart button base styles */
add-to-cart-component {
  display: contents;
}

.add-to-cart-button {
  --text-speed: 0.26;
  --base-delay: calc(var(--text-speed) * 0.25);
  user-select: none;
  transition-property: color, box-shadow, background-color, scale, translate;
  transition-duration: var(--animation-speed, 0.3s);
  transition-timing-function: var(--ease-out-cubic);
  position: relative;
  overflow: hidden;
}

.add-to-cart-button:active {
  scale: 0.99;
  translate: 0 1px;
}

.add-to-cart-text {
  display: flex;
  gap: var(--gap-2xs, 0.3rem);
  align-items: center;
  justify-content: center;
  animation-duration: var(--animation-speed, 0.3s);
  animation-timing-function: var(--animation-easing);
  animation-fill-mode: forwards;
  transition: opacity var(--animation-speed, 0.3s) var(--animation-easing),
    clip-path var(--animation-speed, 0.3s) var(--animation-easing),
    translate var(--animation-speed, 0.3s) var(--animation-easing);
  clip-path: circle(100% at 50% 50%);
}

.add-to-cart__added {
  position: absolute;
  top: 50%;
  left: 50%;
  translate: -50% -50%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.3rem;
  opacity: 0;
  transition: opacity var(--animation-speed, 0.3s) var(--animation-easing);
}

.add-to-cart__added-icon {
  width: 24px;
  height: 24px;
}

/* Added state animation */
[data-added='true'] .add-to-cart-text {
  clip-path: circle(0% at 50% 50%);
  opacity: 0;
  translate: 0 4px;
}

[data-added='true'] .add-to-cart__added {
  opacity: 1;
}

.add-to-cart-icon {
  width: var(--icon-size-sm, 1.25rem);
  height: var(--icon-size-sm, 1.25rem);
}

@keyframes atc-slide {
  to {
    opacity: var(--atc-opacity, 1);
    translate: 0px var(--atc-destination, 0px);
  }
}

@keyframes atc-fade-out {
  to {
    opacity: 0;
  }
}

@keyframes atc-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Quick Add Modal animations */
@keyframes modalSlideInTop {
  from {
    margin-top: var(--padding-sm, 0.75rem);
    opacity: 0;
  }
  to {
    margin-top: 0;
    opacity: 1;
  }
}

@keyframes modalSlideOutTop {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(var(--padding-sm, 0.75rem));
    opacity: 0;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}