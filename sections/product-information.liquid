{%- comment -%}
  Product Information Section
  Main product page section that renders product media gallery and details
{%- endcomment -%}

{%- liquid
  assign product = section.settings.product | default: product
  assign section_color_scheme = section.settings.color_scheme | default: 'scheme-1'
  assign desktop_media_position = section.settings.desktop_media_position | default: 'left'
  assign equal_columns = section.settings.equal_columns | default: true
  assign limit_details_width = section.settings.limit_details_width | default: true
-%}

<section
  id="shopify-section-{{ section.id }}"
  class="product-information color-{{ section_color_scheme }}"
  data-section-id="{{ section.id }}"
  data-section-type="product-information"
>
  <div class="container product-information__container product-information__container--{{ desktop_media_position }}{% if equal_columns %} product-information__container--equal{% endif %}">
    {%- comment -%} Product Media Gallery {%- endcomment -%}
    <div class="product-information__media">
      {% content_for 'block', type: '_product-media-gallery', static: true %}
    </div>

    {%- comment -%} Product Details {%- endcomment -%}
    <div class="product-information__details{% if limit_details_width %} product-information__details--limited{% endif %}">
      {% content_for 'block', type: '_product-details', static: true %}
    </div>
  </div>
</section>

{% stylesheet %}
  .product-information {
    width: 100%;
    padding-block-start: var(--padding-section-block-start, 2rem);
    padding-block-end: var(--padding-section-block-end, 2rem);
  }

  .product-information__container {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--gap-2xl, 2rem);
    max-width: var(--container-max-width, 1200px);
    margin-inline: auto;
    padding-inline: 16px;
  }

  @media screen and (min-width: 750px) {
    .product-information__container {
      padding-inline: 40px;
    }
  }

  @media screen and (min-width: 768px) {
    .product-information__container {
      grid-template-columns: 1fr 1fr;
      gap: var(--gap-3xl, 3rem);
    }

    .product-information__container--equal {
      grid-template-columns: 1fr 1fr;
    }

    .product-information__container--left {
      grid-template-columns: 1fr 1fr;
    }

    .product-information__container--right {
      grid-template-columns: 1fr 1fr;
      direction: rtl;
    }

    .product-information__container--right > * {
      direction: ltr;
    }
  }

  @media screen and (min-width: 1024px) {
    .product-information__container:not(.product-information__container--equal) {
      grid-template-columns: 6fr 5fr;
    }
  }

  .product-information__media {
    position: relative;
    width: 100%;
  }

  .product-information__details {
    position: relative;
    width: 100%;
  }

  .product-information__details--limited {
    max-width: 600px;
  }

  @media screen and (min-width: 768px) {
    .product-information__container--left .product-information__details {
      position: sticky;
      top: var(--header-height, 80px);
      align-self: flex-start;
    }
  }

  @media (max-width: 749px) {
    .product-information__container {
      grid-template-columns: 1fr !important;
    }

    .product-information__container > .product-information__details,
    .product-information__container > .product-information__media {
      grid-column: 1 !important;
    }

    .product-information__media,
    .product-media-container,
    .product-media {
      display: flex !important;
      justify-content: center !important;
      width: 100% !important;
    }

    .product-media__image {
      margin: 0 auto !important;
      display: block !important;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product Information",
  "tag": "section",
  "class": "section-product-information",
  "settings": [
    {
      "type": "select",
      "id": "content_width",
      "label": "Content width",
      "options": [
        { "value": "full-width", "label": "Full width" },
        { "value": "page-width", "label": "Page width" },
        { "value": "content-center-aligned", "label": "Content centered" }
      ],
      "default": "content-center-aligned"
    },
    {
      "type": "select",
      "id": "desktop_media_position",
      "label": "Desktop media position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "checkbox",
      "id": "equal_columns",
      "label": "Equal column widths",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "limit_details_width",
      "label": "Limit details column width",
      "default": true,
      "info": "Limits the product details to a comfortable reading width"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Gap between columns",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_add_to_cart",
      "label": "Enable sticky add to cart",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "_product-media-gallery",
      "name": "Product Media Gallery",
      "limit": 1
    },
    {
      "type": "_product-details",
      "name": "Product Details",
      "limit": 1
    }
  ],
  "presets": [
    {
      "name": "Product Information",
      "blocks": [
        {
          "type": "_product-media-gallery"
        },
        {
          "type": "_product-details"
        }
      ]
    }
  ]
}
{% endschema %}
